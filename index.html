<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ë–æ—Ä—Ç–æ–≤–æ–π –ñ—É—Ä–Ω–∞–ª</title>
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        html, body { height: 100%; width: 100%; overflow: hidden; }
        body {
            font-family: 'Montserrat', sans-serif;
            color: #ffffff;
            background-image: url('foto2.jpg'); 
            background-size: cover; 
            background-position: center bottom;
            background-repeat: no-repeat;
            position: relative;
        }
        body::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.0) 30%, rgba(0,0,0,0.0) 60%, rgba(0,0,0,0.95) 100%);
            z-index: 1; pointer-events: none;
        }
        .main-wrapper {
            position: relative; z-index: 2; height: 100%; width: 100%;
            display: flex; flex-direction: column; justify-content: space-between;
            padding: 40px 20px 40px 20px;
        }
        .header-section { text-align: center; margin-top: 15px; }
        h1 { font-weight: 900; text-transform: uppercase; font-size: 30px; line-height: 1.1; margin: 0; text-shadow: 0 4px 15px rgba(0,0,0,1); letter-spacing: 1px; }
        .bottom-section { width: 100%; max-width: 480px; margin: 0 auto; }
        .menu-btn {
            display: flex; align-items: center; justify-content: space-between;
            background-color: #1A1B22; opacity: 0.96; 
            border: 1px solid rgba(255, 255, 255, 0.08); 
            box-shadow: 0 15px 35px rgba(0,0,0,0.6);
            padding: 22px 25px; margin-bottom: 15px; border-radius: 16px;
            text-decoration: none; color: white; transition: transform 0.1s;
        }
        .menu-btn:active { transform: scale(0.97); border-color: #ff6b00; }
        .btn-text { text-align: left; }
        .btn-title { display: block; font-size: 16px; font-weight: 800; text-transform: uppercase; margin-bottom: 4px; letter-spacing: 0.5px; }
        .btn-sub { display: block; font-size: 10px; color: #777; font-weight: 600; text-transform: uppercase; }
        .custom-icon { width: 36px; height: 36px; filter: drop-shadow(0 4px 6px rgba(255, 107, 0, 0.25)); }
        .version { text-align: center; font-size: 10px; color: rgba(255,255,255,0.3); margin-top: 10px; }
        #lock-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 16, 20, 0.98); backdrop-filter: blur(10px);
            z-index: 9999; display: flex; flex-direction: column;
            align-items: center; justify-content: center; padding: 30px;
            text-align: center; transition: opacity 0.5s ease;
        }
        .lock-icon { font-size: 60px; margin-bottom: 20px; }
        .lock-title { font-size: 24px; font-weight: 800; text-transform: uppercase; margin-bottom: 15px; color: #fff; }
        .lock-desc { font-size: 15px; color: #bbb; margin-bottom: 30px; line-height: 1.5; max-width: 320px; }
        .btn-subscribe {
            background: linear-gradient(90deg, #ff8c00, #ff4500);
            color: white; border: none; padding: 18px 30px;
            border-radius: 12px; font-weight: 800; text-transform: uppercase;
            font-size: 14px; cursor: pointer; text-decoration: none;
            box-shadow: 0 10px 20px rgba(255, 69, 0, 0.3);
            width: 100%; max-width: 280px; display: block; margin-bottom: 15px;
        }
        .btn-check {
            background: transparent; border: 1px solid rgba(255,255,255,0.3);
            color: #fff; padding: 14px 25px; border-radius: 12px;
            font-size: 13px; font-weight: 600; cursor: pointer; text-transform: uppercase;
            width: 100%; max-width: 280px;
        }
        .btn-check:active { background: rgba(255,255,255,0.1); }
        .hidden { opacity: 0; pointer-events: none; }
    </style>
</head>
<body>
    <svg width="0" height="0" style="position:absolute"><defs><linearGradient id="brand-orange" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:#FF8C00;stop-opacity:1" /><stop offset="100%" style="stop-color:#FF4500;stop-opacity:1" /></linearGradient></defs></svg>

    <div id="lock-screen">
        <div class="lock-icon">üîí</div>
        <div class="lock-title">–î–æ—Å—Ç—É–ø –ó–∞–∫—Ä—ã—Ç</div>
        <div class="lock-desc">
            –í—Å—Ç—É–ø–∏—Ç–µ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ <b>Belov Production</b>, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø.
        </div>
        <a href="https://vk.com/club226893474" target="_blank" class="btn-subscribe">–í—Å—Ç—É–ø–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É</a>
        <button class="btn-check" onclick="checkSubscription()">–Ø –≤—Å—Ç—É–ø–∏–ª (–ü—Ä–æ–≤–µ—Ä–∏—Ç—å)</button>
    </div>

    <div class="main-wrapper">
        <div class="header-section">
            <h1>–ë–û–†–¢–û–í–û–ô <br><span style="color:#FF6B00">–ñ–£–†–ù–ê–õ</span></h1>
        </div>
        <div class="bottom-section">
            <a href="fuel.html" class="menu-btn">
                <div class="btn-text"><span class="btn-title">–†–∞—Å—Ö–æ–¥ –¢–æ–ø–ª–∏–≤–∞</span><span class="btn-sub">–ó–∞–ø—Ä–∞–≤–∫–∏ / –û–¥–æ–º–µ—Ç—Ä</span></div>
                <svg class="custom-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="url(#brand-orange)" d="M19.77 7.23l.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33a2.5 2.5 0 0 0 2.5 2.5c.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14a2 2 0 0 0-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77zM12 10H6V5h6v5zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"/></svg>
            </a>
            <a href="income.html" class="menu-btn">
                <div class="btn-text"><span class="btn-title">–î–æ—Ö–æ–¥ —Å –†–µ–π—Å–∞</span><span class="btn-sub">–†–∞—Å—á–µ—Ç –ü—Ä–∏–±—ã–ª–∏</span></div>
                <svg class="custom-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="url(#brand-orange)" d="M12,2C8.69,2,6,4.69,6,8v2H4v10c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V10h-2V8C18,4.69,15.31,2,12,2z M12,4c2.21,0,4,1.79,4,4v2H8V8C8,6.21,9.79,4,12,4z M12,16c-1.1,0-2-0.9-2-2c0-1.1,0.9-2,2-2s2,0.9,2,2C14,15.1,13.1,16,12,16z"/></svg>
            </a>
            <div class="version">v2.5 TEST MODE</div>
        </div>
    </div>

    <script>
        const APP_ID = 54423326; 
        const GROUP_ID = 226893474; 
        const lockScreen = document.getElementById('lock-screen');

        vkBridge.send('VKWebAppInit');

        function checkSubscription() {
            alert("1. –ù–∞—á–∏–Ω–∞—é –ø—Ä–æ–≤–µ—Ä–∫—É..."); // –û–¢–õ–ê–î–ö–ê

            vkBridge.send("VKWebAppGetAuthToken", {
                "app_id": APP_ID, 
                "scope": "groups"
            })
            .then(data => {
                alert("2. –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω!"); // –û–¢–õ–ê–î–ö–ê
                const token = data.access_token;
                
                vkBridge.send("VKWebAppCallAPIMethod", {
                    "method": "groups.isMember",
                    "request_id": "check_membership",
                    "params": {
                        "group_id": GROUP_ID,
                        "v": "5.131",
                        "access_token": token
                    }
                })
                .then(response => {
                    // –û–¢–õ–ê–î–ö–ê: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç –í–ö
                    alert("3. –û—Ç–≤–µ—Ç –í–ö: " + JSON.stringify(response));

                    // –û–±—ã—á–Ω–æ –æ—Ç–≤–µ—Ç –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫: {response: 1} –∏–ª–∏ {response: 0}
                    if (response.response == 1) {
                        alert("–£—Å–ø–µ—Ö! –í—ã –ø–æ–¥–ø–∏—Å–∞–Ω—ã."); // –û–¢–õ–ê–î–ö–ê
                        lockScreen.classList.add('hidden');
                    } else {
                        alert("–í–ö –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –≤—ã –ù–ï –ø–æ–¥–ø–∏—Å–∞–Ω—ã (–æ—Ç–≤–µ—Ç 0). –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ID –≥—Ä—É–ø–ø—ã.");
                    }
                })
                .catch(error => {
                    alert("–û–®–ò–ë–ö–ê API (–®–∞–≥ 3): " + JSON.stringify(error));
                });
            })
            .catch(error => {
                alert("–û–®–ò–ë–ö–ê –¢–û–ö–ï–ù–ê (–®–∞–≥ 2). –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –∑–∞–ø—Ä–µ—Ç–∏–ª–∏ –¥–æ—Å—Ç—É–ø? –û—à–∏–±–∫–∞: " + JSON.stringify(error));
            });
        }
    </script>
</body>
</html>
